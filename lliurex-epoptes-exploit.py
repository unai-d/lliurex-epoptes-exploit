#! /usr/bin/python

import os
import os.path
import sys
import epoptes

os.chdir("/usr/share/epoptes")

from twisted.internet import gtk2reactor
gtk2reactor.install()
from twisted.internet import reactor
from twisted.internet.protocol import ClientCreator
from twisted.protocols import amp

from epoptes.daemon import uiconnection
from epoptes.ui import gui
from epoptes.common import config
import xmlrpclib

prox = xmlrpclib.ServerProxy("https://server:9779", allow_none=True)
answer = prox.register_ip((os.environ["USER"], ""), "EpoptesServer", "")

epoptesGui = gui.EpoptesGui()
epoptesGui.n4d_user = os.environ["USER"]
epoptesGui.n4d_password = ""

d = ClientCreator(reactor, epoptes.daemon.uiconnection.Daemon, epoptesGui).connectTCP("server", 10000)

reactor.run()
